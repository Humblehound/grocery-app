<ion-view>
  <ion-header-bar class="bar-positive">
    <div class="buttons">
      <button class="button button-icon icon ion-arrow-left-c" ng-click="back()"></button>
    </div>
    <h1 class="title">{{title}}</h1>
  </ion-header-bar>
  <ion-content>

    <form name="dataForm" novalidate="" ng-submit="save(dataForm)">

      <div class="list">
        <label class="item item-input"
               ng-class="{ 'has-errors' : dataForm.name.$invalid && dataForm.name.$dirty, 'no-errors' : dataForm.name.$valid && (dataForm.name.$dirty || dataForm.$submitted) }">
          <span class="input-label">Product Name</span>
          <input type="text" name="name" ng-model="item.name" ng-minlength="5" ng-maxlength="20" required>
        </label>
        <div class="error-container last-error-container" ng-show="dataForm.name.$error"
             ng-messages="dataForm.name.$error" ng-if='dataForm.name.$dirty'>
          <div ng-messages-include="error-list.html"></div>
        </div>

        <label class="item item-input"
               ng-class="{ 'has-errors' : dataForm.store.$invalid && dataForm.store.$dirty, 'no-errors' : dataForm.store.$valid && (dataForm.store.$dirty || dataForm.$submitted)}">
          <span class="input-label">Store</span>
          <input type="text" name="store" ng-model="item.store" ng-minlength="5" ng-maxlength="20">
        </label>
        <div class="error-container last-error-container" ng-show="dataForm.store.$error"
             ng-messages="dataForm.store.$error" ng-if='dataForm.store.$dirty'>
          <div ng-messages-include="error-list.html"></div>
        </div>

        <label class="item item-input" ng-class="{ 'has-errors' : dataForm.price.$invalid && dataForm.price.$dirty, 'no-errors' : dataForm.price.$valid && (dataForm.price.$dirty || dataForm.$submitted)}">
          <span class="input-label">Price</span>
          <input type="number" name="price" ng-model="item.price" step="0.01" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" required>
        </label>
        <div class="error-container last-error-container" ng-show="dataForm.price.$error"
             ng-messages="dataForm.price.$error" ng-if='dataForm.price.$dirty'>
          <div ng-messages-include="error-list.html"></div>
        </div>
      </div>
      <button class="button button-full button-positive" type="submit">
        Save
      </button>
    </form>
  </ion-content>

  <script id="error-list.html" type="text/ng-template">
    <div class="error" ng-message="required">
      <i class="ion-information-circled"></i>
      This field is required!
    </div>
    <div class="error" ng-message="minlength">
      <i class="ion-information-circled"></i>
      Minimum length of this field is 5 characters!
    </div>
    <div class="error" ng-message="maxlength">
      <i class="ion-information-circled"></i>
      Maximum length of this field is 20 characters!
    </div>
    <div class="error" ng-message="pattern">
      <i class="ion-information-circled"></i>
      Invalid number
    </div>
    <div class="error" ng-message="number">
      <i class="ion-information-circled"></i>
      Invalid number
    </div>
  </script>
</ion-view>

